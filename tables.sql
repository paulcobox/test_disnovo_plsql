/*
#######################################################################################################
TABLE "SYSTEM"."CORE_CONTACT"
#######################################################################################################
*/
CREATE TABLE "SYSTEM"."CORE_CONTACT" 
(	
	"ID_CONTACT" NUMBER(11,0) GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NICKNAME_OWNER" NVARCHAR2(150) NOT NULL ENABLE, 
	"BUSINESS_NAME" NVARCHAR2(150), 
	"TRADENAME" NVARCHAR2(150), 
	"FIRSTNAMES" NVARCHAR2(150), 
	"LASTNAMES" NVARCHAR2(150), 
	"TYPE_USER" NVARCHAR2(50), 
	"DESCRIPTION" NCLOB, 
	"OBSERVATIONS" NCLOB, 
	"OBJECTIVE" NCLOB, 
	"CREATION_DATE" TIMESTAMP WITH TIME ZONE DEFAULT SYSDATE,
	"STATE" NUMBER(1,0) NOT NULL ENABLE,
	"ERASED" NUMBER(1,0) NOT NULL ENABLE,
	CHECK ("STATE" IN (0,1)) ENABLE,
	CHECK ("ERASED" IN (0,1)) ENABLE,
	PRIMARY KEY ("ID_CONTACT", "NICKNAME_OWNER") ENABLE
) ;
/*
#######################################################################################################
TABLE "SYSTEM"."CORE_PRODUCTTYPE"
#######################################################################################################
*/
CREATE TABLE "SYSTEM"."CORE_PRODUCTTYPE" 
(	
	"ID_PRODUCT_TYPE" NUMBER(11,0) GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NICKNAME_OWNER" NVARCHAR2(150) NOT NULL ENABLE, 
	"PRODUCT_TYPE_NAME" NVARCHAR2(150), 
	"PRODUCT_TYPE_TITLE" NVARCHAR2(150), 
	"ID_EXTERNAL" NUMBER(11,0) NOT NULL ENABLE, 
	"NICKNAME_CREATOR" NVARCHAR2(150), 
	"CREATION_DATE" TIMESTAMP WITH TIME ZONE DEFAULT SYSDATE, 
	"ISPUBLIC" NUMBER(1,0) NOT NULL ENABLE, 
	"STATE" NUMBER(1,0) NOT NULL ENABLE, 
	"ERASED" NUMBER(1,0) NOT NULL ENABLE, 
	 CHECK ("ID_EXTERNAL" >= 0) ENABLE, 
	 CHECK ("ISPUBLIC" IN (0,1)) ENABLE, 
	 CHECK ("STATE" IN (0,1)) ENABLE, 
	 CHECK ("ERASED" IN (0,1)) ENABLE, 
	 PRIMARY KEY ("ID_PRODUCT_TYPE", "NICKNAME_OWNER")
) ;
/*
#######################################################################################################
TABLE "SYSTEM"."CORE_PRODUCT"
#######################################################################################################
*/
CREATE TABLE "SYSTEM"."CORE_PRODUCT" 
(	

	"ID_PRODUCT" NUMBER(11,0) GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NICKNAME_OWNER" NVARCHAR2(150) NOT NULL ENABLE, 
	"PRODUCT_NAME" NVARCHAR2(150), 
	"PRODUCT_TITLE" NVARCHAR2(150), 
	"DESCRIPTION" NCLOB, 
	"OBSERVATIONS" NCLOB, 
	"STOCK_MIN" NUMBER(11,0) NOT NULL ENABLE, 
	"STOCK_MAX" NUMBER(11,0) NOT NULL ENABLE, 
	"PRICE" NUMBER(8,2) NOT NULL ENABLE,
	"ID_PRODUCT_TYPE" NUMBER(11,0) NOT NULL ENABLE, 
	"NICKNAME_OWNER_TYPE" NVARCHAR2(150) NOT NULL ENABLE, 
	"NICKNAME_CREATOR" NVARCHAR2(150), 
	"CREATION_DATE" TIMESTAMP WITH TIME ZONE DEFAULT SYSDATE,  
	"STATE" NUMBER(1,0) NOT NULL ENABLE, 
	"ERASED" NUMBER(1,0) NOT NULL ENABLE, 
	CHECK ("STOCK_MIN" >= 0) ENABLE, 
	CHECK ("STOCK_MAX" >= 0) ENABLE, 
	CHECK ("STATE" IN (0,1)) ENABLE, 
	CHECK ("ERASED" IN (0,1)) ENABLE, 
	PRIMARY KEY ("ID_PRODUCT", "NICKNAME_OWNER"),
	CONSTRAINT "CORE_PROD_FK1" 
		FOREIGN KEY ("ID_PRODUCT_TYPE","NICKNAME_OWNER_TYPE")
		REFERENCES "SYSTEM"."CORE_PRODUCTTYPE"("ID_PRODUCT_TYPE", "NICKNAME_OWNER")

) ;
/*
#######################################################################################################
TABLE "SYSTEM"."CORE_TRANSACTIONTYPE"
#######################################################################################################
*/
CREATE TABLE "SYSTEM"."CORE_TRANSACTIONTYPE" 
(	
	"ID_TRANSACTION_TYPE" NUMBER(11,0) GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NICKNAME_OWNER" NVARCHAR2(150) NOT NULL ENABLE,  
	"TRANSACTION_TYPE_NAME" NVARCHAR2(150), 
	"TRANSACTION_TYPE_TITLE" NVARCHAR2(150), 
	"ISSUBTYPE" NUMBER(1,0) NOT NULL ENABLE, 
	"DESCRIPTION" NCLOB, 
	"ID_EXTERNAL" NUMBER(11,0) NOT NULL ENABLE, 
	"NICKNAME_CREATOR" NVARCHAR2(150), 
	"CREATION_DATE" TIMESTAMP WITH TIME ZONE DEFAULT SYSDATE,
	 CHECK ("ISSUBTYPE" IN (0,1)) ENABLE, 
	 CHECK ("ID_EXTERNAL" >= 0) ENABLE, 
	 PRIMARY KEY ("ID_TRANSACTION_TYPE","NICKNAME_OWNER")
 ) ;
/*
#######################################################################################################
TABLE "SYSTEM"."CORE_TRANSACTION"
#######################################################################################################
*/
CREATE TABLE "SYSTEM"."CORE_TRANSACTION" 
(	
	"ID_TRANSACTION" NUMBER(11,0) GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"NICKNAME_OWNER" NVARCHAR2(150) NOT NULL ENABLE,
	
	"TRANSACTION_NAME" NVARCHAR2(150), 
	"TRANSACTION_TITLE" NVARCHAR2(150),
	
	"ID_TRANSACTION_TYPE" NUMBER(11,0) NOT NULL ENABLE, 
	"NICKNAME_OWNER_TYPE" NVARCHAR2(150) NOT NULL ENABLE,
	
	"ID_CONTACT" NUMBER(11,0) NOT NULL ENABLE, 
	"NICKNAME_OWNER_CONTACT" NVARCHAR2(150) NOT NULL ENABLE, 
	
	"START_DATE_FULL" DATE NOT NULL ENABLE, 
	"START_DATE" DATE NOT NULL ENABLE, 
	"START_YEAR" NUMBER(4,0) NOT NULL ENABLE, 
	"START_MONTH" NUMBER(2,0) NOT NULL ENABLE, 
	"START_WEEK" NUMBER(1,0) NOT NULL ENABLE, 
	"START_DAY" NUMBER(2,0) NOT NULL ENABLE, 
	"START_TIME" DATE NOT NULL ENABLE, 
	"TRANSACTION_PROBABILITY" NUMBER(8,2) NOT NULL ENABLE, 
	"TRANSACTION_PREVALUE" NUMBER(8,2) NOT NULL ENABLE, 
	"TRANSACTION_DISCOUNT" NUMBER(8,2) NOT NULL ENABLE, 
	"TRANSACTION_CHARGE" NUMBER(8,2) NOT NULL ENABLE, 
	"TRANSACTION_VALUE" NUMBER(8,2) NOT NULL ENABLE, 
	"TRANSACTION_TAXPERCENTAGE" NUMBER(8,2) NOT NULL ENABLE, 
	"TRANSACTION_TAX" NUMBER(8,2) NOT NULL ENABLE, 
	"TRANSACTION_TOTAL" NUMBER(8,2) NOT NULL ENABLE, 
	"TRANSACTION_BALANCE" NUMBER(8,2) NOT NULL ENABLE, 
	"ID_EXTERNAL" NUMBER(11,0) NOT NULL ENABLE, 
	"COMMENTARY" NCLOB, 
	"DESCRIPTION" NCLOB, 
	"OBSERVATION" NCLOB, 
	"OBJECTIVE" NCLOB, 
	"OBJECTIVE_COMPLETED" NUMBER(1,0) NOT NULL ENABLE, 
	"NICKNAME_CREATOR" NVARCHAR2(150), 
	"CREATION_DATE" TIMESTAMP (6) NOT NULL ENABLE, 
	"STATE" NUMBER(1,0) NOT NULL ENABLE, 
	"ERASED" NUMBER(1,0) NOT NULL ENABLE, 
	 CHECK ("ID_EXTERNAL" >= 0) ENABLE, 
	 CHECK ("OBJECTIVE_COMPLETED" IN (0,1)) ENABLE, 
	 CHECK ("STATE" IN (0,1)) ENABLE, 
	 CHECK ("ERASED" IN (0,1)) ENABLE, 
	 PRIMARY KEY ("ID_TRANSACTION", "NICKNAME_OWNER"),
	 CONSTRAINT "CORE_TRAN_FK1" 
		FOREIGN KEY ("ID_TRANSACTION_TYPE","NICKNAME_OWNER_TYPE")
		REFERENCES "SYSTEM"."CORE_TRANSACTIONTYPE"("ID_TRANSACTION_TYPE", "NICKNAME_OWNER"),
	 CONSTRAINT "CORE_TRAN_FK2" 
		FOREIGN KEY ("ID_CONTACT","NICKNAME_OWNER_CONTACT")
		REFERENCES "SYSTEM"."CORE_CONTACT"("ID_CONTACT", "NICKNAME_OWNER")
) ;
/*
#######################################################################################################
TABLE "SYSTEM"."CORE_TRANSACTIONDETAIL"
#######################################################################################################
*/
CREATE TABLE "SYSTEM"."CORE_TRANSACTIONDETAIL" 
   (	
	
	"ID_TRANSACTION" NUMBER(11,0) NOT NULL ENABLE, 
	"NICKNAME_OWNER_TRANSACTION" NVARCHAR2(150) NOT NULL ENABLE,
	
	"ID_PRODUCT" NUMBER(11,0) NOT NULL ENABLE, 
	"NICKNAME_OWNER_PRODUCT" NVARCHAR2(150) NOT NULL ENABLE, 
	
	"ID_ITEM" NUMBER(11,0) GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	
	"PRICE" NUMBER(8,2) NOT NULL ENABLE, 
	"QUANTITY" NUMBER(11,0) NOT NULL ENABLE, 
	"TRANSACTIONDETAIL_DISCOUNT" NUMBER(8,2) NOT NULL ENABLE, 
	"TRANSACTIONDETAIL_DISCOUNTPERCENTAGE" NUMBER(8,2) NOT NULL ENABLE, 
	"TRANSACTIONDETAIL_CHARGE" NUMBER(8,2) NOT NULL ENABLE,
	"TRANSACTIONDETAIL_CHARGEPERCENTAGE" NUMBER(8,2) NOT NULL ENABLE,
	"TRANSACTIONDETAIL_TAXPERCENTAGE" NUMBER(8,2) NOT NULL ENABLE, 
	"TRANSACTIONDETAIL_TAX" NUMBER(8,2) NOT NULL ENABLE, 
	"TRANSACTIONDETAIL_BALANCE" NUMBER(8,2) NOT NULL ENABLE, 
	"DESCRIPTION" NCLOB, 
	"COMMENTARY" NCLOB, 
	"STATE" NUMBER(1,0) NOT NULL ENABLE, 
	"ERASED" NUMBER(1,0) NOT NULL ENABLE, 
	 CHECK ("QUANTITY" >= 0) ENABLE, 
	 CHECK ("STATE" IN (0,1)) ENABLE, 
	 CHECK ("ERASED" IN (0,1)) ENABLE, 
	 PRIMARY KEY ("ID_ITEM","ID_TRANSACTION","NICKNAME_OWNER_TRANSACTION","ID_PRODUCT","NICKNAME_OWNER_PRODUCT"), 
	 CONSTRAINT "CORE_TRAN_DET_FK1" 
		FOREIGN KEY ("ID_TRANSACTION","NICKNAME_OWNER_TRANSACTION")
		REFERENCES "SYSTEM"."CORE_TRANSACTION"("ID_TRANSACTION", "NICKNAME_OWNER")
		ON DELETE CASCADE,
	 CONSTRAINT "CORE_TRAN_DET_FK2" 
		FOREIGN KEY ("ID_PRODUCT","NICKNAME_OWNER_PRODUCT")
		REFERENCES "SYSTEM"."CORE_PRODUCT"("ID_PRODUCT", "NICKNAME_OWNER")
  
) ;
